<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asistencia</title>
<link rel="stylesheet" href="/assets/css/instructor.css">
<link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
<aside class="sidebar">
  <div class="total">
    <img class="imagen__logo" src="/assets/images/logo.png" alt="logo-instituto">
    <h2 class="logo">Sistema de Inventario</h2>
  </div>
  <ul>
    <li><a href="instructor.html"><i class="ri-dashboard-line"></i> Inicio</a></li>
    <li><a href="cursos.html"><i class="ri-book-2-line"></i> Mis Cursos</a></li>
    <li><a href="horario.html"><i class="ri-calendar-line"></i> Horario</a></li>
    <li><a href="notas.html"><i class="ri-edit-2-line"></i> Notas</a></li>
    <li><a href="materiales.html"><i class="ri-folder-line"></i> Materiales</a></li>
    <li class="active"><a href="asistencia.html"><i class="ri-checkbox-circle-line"></i> Asistencia</a></li>
    <li><a href="reportes.html"><i class="ri-bar-chart-line"></i> Reportes</a></li>
    <li><a href="peticiones.html"><i class="ri-mail-line"></i> Peticiones</a></li>
    <li><a href="delegados.html"><i class="ri-team-line"></i> Delegados</a></li>
  </ul>
</aside>

<main class="main-content">
  <header class="header">
    <h1>Registro de Asistencia</h1>
    <button class="logout-btn" id="logout-btn"><i class="ri-logout-box-r-line"></i> Cerrar Sesión</button>
  </header>

  <section class="filters">
    <select id="select-curso">
      <option value="">Seleccione un curso</option>
      <option value="FISII2025">Laboratorio de Física II</option>
      <option value="ELEC12025">Laboratorio de Electrónica I</option>
    </select>
    <select id="select-grupo">
      <option value="">Todos los grupos</option>
      <option value="A">Grupo A</option>
      <option value="B">Grupo B</option>
    </select>
    <input type="date" id="fecha-asistencia" value="">
    <button class="btn-load" id="btn-cargar">Cargar estudiantes</button>
  </section>

  <section>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Código</th>
          <th>Estudiante</th>
          <th>Asistencia</th>
        </tr>
      </thead>
      <tbody id="asistencia-body">
        <tr data-student-id="2025001">
          <td>2025001</td>
          <td>Ana Torres</td>
          <td><input type="checkbox" class="chk-asistencia" checked></td>
        </tr>
        <tr data-student-id="2025002">
          <td>2025002</td>
          <td>Pedro Ruiz</td>
          <td><input type="checkbox" class="chk-asistencia"></td>
        </tr>
      </tbody>
    </table>
  </section>

  <div class="actions">
    <button class="btn-save" id="btn-guardar">Guardar Asistencia</button>
  </div>
</main>

<script>
  // Simulación: cargar estudiantes (Lógica LOCAL)
  document.getElementById('btn-cargar').addEventListener('click', () => {
    const curso = document.getElementById('select-curso').value;
    const grupo = document.getElementById('select-grupo').value;
    const fecha = document.getElementById('fecha-asistencia').value;
    if(!curso || !fecha){
      alert("Selecciona curso y fecha.");
      return;
    }
    alert(`Cargando estudiantes para ${curso} - Grupo: ${grupo || "Todos"} - Fecha: ${fecha}`);
  });

  // Guardar asistencia (Lógica LOCAL)
  document.getElementById('btn-guardar').addEventListener('click', () => {
    const fecha = document.getElementById('fecha-asistencia').value;
    const curso = document.getElementById('select-curso').value;
    const asistencias = Array.from(document.querySelectorAll('#asistencia-body tr')).map(row => {
      return {
        id: row.dataset.studentId,
        presente: row.querySelector('.chk-asistencia').checked
      };
    });
    alert(`Guardando asistencia de ${curso} en ${fecha}:\n` + JSON.stringify(asistencias));
  });

  // *** EL CÓDIGO DE LOGOUT FUE ELIMINADO DE AQUÍ Y MOVIDO A instructor.js ***
</script>

<script src="/assets/js/instructor.js"></script>

</body>
</html>